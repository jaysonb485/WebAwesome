@using System.Globalization
@inherits WAComponentBase
<wa-relative-time @ref="@Element"
                  id="@Id"
                  @attributes="@AdditionalAttributes"
                  style="@StyleNames"
                  slot="@Slot"
                  class="@ClassNames"
                  date="@DateTimeISOString"
                  sync="@AutoRefresh"
                  format="@FormatString"
                  numeric="@(AlwaysNumeric ? "always" : "auto")"
                  lang="@Culture.Name"></wa-relative-time>

@code {
    [Parameter]
    public DateTime? DateTimeValue { get; set; }
    string DateTimeISOString
    {
        get
        {

            return DateTimeValue == null ? String.Empty : DateTimeValue.Value.ToString("o", CultureInfo.InvariantCulture);
        }
    }

    [Parameter]
    public bool AutoRefresh { get; set; } = false;

    [Parameter]
    public Enums.RelativeTimeFormat Format { get; set; } = Enums.RelativeTimeFormat.Long;
    string FormatString
    {
        get
        {
            return Format switch
            {
                Enums.RelativeTimeFormat.Long => "long",
                Enums.RelativeTimeFormat.Narrow => "narrow",
                Enums.RelativeTimeFormat.Short => "short",
                _ => "long"
            };
        }
    }

    [Parameter]
    public bool AlwaysNumeric { get; set; } = false;

    [Parameter]
    public CultureInfo Culture { get; set; } = CultureInfo.CurrentCulture;
}

