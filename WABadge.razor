@inherits WAComponentBase
<wa-badge @ref="@Element"
          id="@Id"
          @attributes="@AdditionalAttributes" 
          variant="@VariantString"
          appearance="@AppearanceString"
          pill="@Pill"
          attention="@PulseString"
          style="@StyleNames"
          class="@ClassNames"
          slot="@Slot">
    @Text
    @ChildContent
</wa-badge>

@code {
    /// <summary>
    /// The text to display in the badge.
    /// </summary>
    [Parameter]
    public string? Text { get; set; }

    /// <summary>
    /// The badge's theme variant. Defaults to brand if not within another element with a variant.
    /// </summary>
    [Parameter]
    public Enums.Variant Variant { get; set; } = Enums.Variant.Brand;
    string VariantString
    {
        get
        {
            return Variant switch
            {
                Enums.Variant.Brand => "brand",
                Enums.Variant.Success => "success",
                Enums.Variant.Neutral => "neutral",
                Enums.Variant.Warning => "warning",
                Enums.Variant.Danger => "danger",
                _ => "brand"
            };
        }
    }
    /// <summary>
    /// The badge's visual appearance. Valid options for badge are: Accent, AccentOutlined, Filled, FilledOutlined, Outlined.
    /// </summary>
    [Parameter]
    public Enums.Appearance Appearance { get; set; } = Enums.Appearance.Accent;
    string AppearanceString
    {
        get
        {
            return Appearance switch
            {
                Enums.Appearance.Accent => "accent",
                Enums.Appearance.AccentOutlined => "accent outlined",
                Enums.Appearance.Filled => "filled",
                Enums.Appearance.FilledOutlined => "filled outlined",
                Enums.Appearance.Outlined => "outlined",
                _ => "accent"
                //Plain is not valid for badge
            };
        }
    }

    /// <summary>
    /// Draws a pill-style badge with rounded edges.
    /// </summary>
    [Parameter]
    public bool Pill { get; set; } = false;

    /// <summary>
    /// Adds an animation to draw attention to the badge.
    /// </summary>
    [Parameter]
    public Enums.BadgePulse Pulse { get; set; } = Enums.BadgePulse.None;
    string PulseString
    {
        get
        {
            return Pulse switch
            {
                Enums.BadgePulse.None => "none",
                Enums.BadgePulse.Pulse => "pulse",
                Enums.BadgePulse.Bounce => "bounce",
                _ => "none"
            };
        }
    }

    /// <summary>
    /// The color of the badge's pulse effect when using attention="pulse".
    /// </summary>
    [Parameter]
    public string? PulseColor { get; set; }

    protected override string? StyleNames => BuildStyleNames(Style,
        ($"--pulse-color: {PulseColor}", !String.IsNullOrEmpty(PulseColor))
    );
}
